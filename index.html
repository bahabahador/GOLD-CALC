<!DOCTYPE html>

</head>

<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ù‚ÛŒÙ…Øª Ø·Ù„Ø§</title>
    <meta name="theme-color" content="#D4AF37">
    <meta name="description" content="Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª ÙØ±ÙˆØ´ Ø·Ù„Ø§ Ø¨Ø§ Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ† Ø§Ø¬Ø±ØªØŒ Ø³ÙˆØ¯ØŒ Ù…Ø§Ù„ÛŒØ§Øª Ùˆ ÙˆØ²Ù†">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ’°</text></svg>">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #121212;
            color: #f5f5f5;
            line-height: 1.6;
            padding: 0;
            margin: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-top: 20px;
        }
        
        h1 {
            color: #D4AF37;
            font-size: 28px;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .app-description {
            color: #aaa;
            font-size: 14px;
            margin-bottom: 20px;
        }
        
        .install-notice {
            background-color: rgba(212, 175, 55, 0.15);
            border: 2px solid #D4AF37;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            text-align: center;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(212, 175, 55, 0); }
            100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); }
        }
        
        .install-notice h3 {
            color: #D4AF37;
            margin-bottom: 10px;
            font-size: 20px;
        }
        
        .install-notice p {
            color: #ddd;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .privacy-badge {
            display: inline-block;
            background-color: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-top: 10px;
            border: 1px solid #4CAF50;
        }
        
        .tabs {
            display: flex;
            background-color: #1e1e1e;
            border-radius: 10px 10px 0 0;
            overflow: hidden;
            margin-bottom: 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .tab-btn {
            flex: 1;
            background: none;
            border: none;
            color: #aaa;
            padding: 15px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .tab-btn.active {
            background-color: #2a2a2a;
            color: #D4AF37;
            border-bottom: 3px solid #D4AF37;
        }
        
        .tab-content {
            display: none;
            background-color: #2a2a2a;
            border-radius: 0 0 10px 10px;
            padding: 25px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            margin-bottom: 30px;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #D4AF37;
            font-weight: 600;
        }
        
        input {
            width: 100%;
            padding: 14px;
            background-color: #1e1e1e;
            border: 2px solid #333;
            border-radius: 8px;
            color: #f5f5f5;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        input:focus {
            outline: none;
            border-color: #D4AF37;
        }
        
        .calculate-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #D4AF37 0%, #b8941f 100%);
            color: #121212;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            box-shadow: 0 4px 8px rgba(212, 175, 55, 0.3);
        }
        
        .calculate-btn:hover {
            background: linear-gradient(135deg, #e6c158 0%, #D4AF37 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(212, 175, 55, 0.4);
        }
        
        .results {
            background-color: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            margin-top: 25px;
            border-right: 4px solid #D4AF37;
            display: none;
        }
        
        .results h3 {
            color: #D4AF37;
            margin-bottom: 15px;
            font-size: 20px;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #333;
        }
        
        .result-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .result-label {
            color: #aaa;
        }
        
        .result-value {
            color: #f5f5f5;
            font-weight: 700;
            font-size: 18px;
        }
        
        .history {
            background-color: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .history h3 {
            color: #D4AF37;
            font-size: 20px;
        }
        
        .clear-history {
            background-color: #333;
            color: #f5f5f5;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease;
        }
        
        .clear-history:hover {
            background-color: #444;
        }
        
        .history-item {
            background-color: #2a2a2a;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            border-right: 3px solid #D4AF37;
        }
        
        .history-item:last-child {
            margin-bottom: 0;
        }
        
        .history-datetime {
            color: #aaa;
            font-size: 13px;
            margin-bottom: 8px;
        }
        
        .history-details {
            color: #f5f5f5;
            font-size: 14px;
        }
        
        .history-details div {
            margin-bottom: 4px;
        }
        
        .install-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: linear-gradient(135deg, #D4AF37 0%, #b8941f 100%);
            color: #121212;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .install-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #666;
            font-size: 14px;
            padding-bottom: 20px;
            border-top: 1px solid #333;
            padding-top: 20px;
        }
        
        .footer-name {
            color: #D4AF37;
            font-weight: 600;
        }
        
        .note {
            background-color: rgba(212, 175, 55, 0.1);
            border-right: 3px solid #D4AF37;
            padding: 12px;
            border-radius: 6px;
            margin-top: 15px;
            font-size: 14px;
            color: #ddd;
        }
        
        .privacy-info {
            background-color: rgba(33, 150, 243, 0.1);
            border-right: 3px solid #2196F3;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .privacy-icon {
            font-size: 24px;
            color: #2196F3;
        }
        
        .privacy-text {
            color: #90CAF9;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .result-value {
                font-size: 16px;
            }
            
            .install-btn {
                bottom: 15px;
                left: 15px;
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .install-notice {
                padding: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
            }
            
            h1 {
                font-size: 22px;
            }
        }
        
        /* PWA Ù†ØµØ¨ */
        @media (display-mode: standalone) {
            .install-btn, .install-notice {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ§® Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ø·Ù„Ø§</h1>
            <p class="app-description">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ù‚ÛŒÙ‚ Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ Ø¨Ø§ Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ† Ø§Ø¬Ø±ØªØŒ Ø³ÙˆØ¯ØŒ Ù…Ø§Ù„ÛŒØ§Øª Ùˆ Ù†Ø±Ø® Ø®Ø±ÛŒØ¯/ØªØ¹ÙˆÛŒØ´ Ø·Ù„Ø§</p>
        </header>
                
        <div class="tabs">
            <button class="tab-btn active" data-tab="tab1">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª ÙØ±ÙˆØ´</button>
            <button class="tab-btn" data-tab="tab2">ØªØ¨Ø¯ÛŒÙ„ Ù†Ø±Ø® Ø®Ø±ÛŒØ¯/ØªØ¹ÙˆÛŒØ¶</button>
        </div>
        
        <!-- ØªØ¨ Ø§ÙˆÙ„: Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª ÙØ±ÙˆØ´ Ø·Ù„Ø§ -->
        <div id="tab1" class="tab-content active">
            <div class="privacy-info">
                <div class="privacy-icon">ğŸ”’</div>
                <div class="privacy-text">
                    ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ùˆ Ù†ØªØ§ÛŒØ¬ Ù…Ø­Ø§Ø³Ø¨Ø§Øª ÙÙ‚Ø· Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ù‡ÛŒÚ† Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§Ø±Ø³Ø§Ù„ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ Ø´Ù…Ø§ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø­ÙØ¸ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                </div>
            </div>
            
            <div class="input-group">
                <label for="goldPrice">Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ÛŒ Ø®Ø§Ù… (ØªÙˆÙ…Ø§Ù† Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ú¯Ø±Ù…)</label>
                <input type="text" id="goldPrice" placeholder="Ù…Ø«Ø§Ù„: 12,300,000" data-type="price">
            </div>
            
            <div class="input-group">
                <label for="wagePercent">Ø¯Ø±ØµØ¯ Ø§Ø¬Ø±Øª Ø³Ø§Ø®Øª (%)</label>
                <input type="number" id="wagePercent" value="15" min="0" max="100">
            </div>
            
            <div class="input-group">
                <label for="profitPercent">Ø¯Ø±ØµØ¯ Ø³ÙˆØ¯ Ø·Ù„Ø§ ÙØ±ÙˆØ´ (%)</label>
                <input type="number" id="profitPercent" value="7" min="0" max="100">
            </div>
            
            <div class="input-group">
                <label for="taxPercent">Ø¯Ø±ØµØ¯ Ù…Ø§Ù„ÛŒØ§Øª (%)</label>
                <input type="number" id="taxPercent" value="10" min="0" max="100">
            </div>
            
            <div class="input-group">
                <label for="weight">ÙˆØ²Ù† Ø·Ù„Ø§ (Ú¯Ø±Ù…)</label>
                <input type="number" id="weight" placeholder="Ù…Ø«Ø§Ù„: 5.090" step="0.001" min="0.001">
            </div>
            
            <button class="calculate-btn" id="calculateBtn1">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ</button>
            
            <div class="note">
                <strong>ØªÙˆØ¬Ù‡:</strong> Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¨Ø± Ø§Ø³Ø§Ø³ ÙØ±Ù…ÙˆÙ„ Ø¯Ù‚ÛŒÙ‚ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø·Ù„Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯.
            </div>
            
            <div id="results1" class="results">
                <h3>ğŸ“Š Ù†ØªØ§ÛŒØ¬ Ù…Ø­Ø§Ø³Ø¨Ù‡</h3>
                <div class="result-item">
                    <span class="result-label">Ù‚ÛŒÙ…Øª Ø¨Ø§ Ø§Ø¬Ø±Øª (Ù‡Ø± Ú¯Ø±Ù…):</span>
                    <span class="result-value" id="priceWithWage">0 ØªÙˆÙ…Ø§Ù†</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Ù‚ÛŒÙ…Øª Ø¨Ø§ Ø§Ø¬Ø±Øª Ùˆ Ø³ÙˆØ¯ (Ù‡Ø± Ú¯Ø±Ù…):</span>
                    <span class="result-value" id="priceWithWageProfit">0 ØªÙˆÙ…Ø§Ù†</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Ù…Ø¨Ù„Øº Ø§Ø¬Ø±Øª Ùˆ Ø³ÙˆØ¯:</span>
                    <span class="result-value" id="wageProfitAmount">0 ØªÙˆÙ…Ø§Ù†</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Ù…Ø¨Ù„Øº Ø¨Ø§ Ù…Ø§Ù„ÛŒØ§Øª:</span>
                    <span class="result-value" id="taxedAmount">0 ØªÙˆÙ…Ø§Ù†</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡ Ù‡Ø± Ú¯Ø±Ù…:</span>
                    <span class="result-value" id="basePricePerGram">0 ØªÙˆÙ…Ø§Ù†</span>
                </div>
                <div class="result-item">
                    <span class="result-label" style="color:#D4AF37; font-size:20px;">ğŸ’° Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ Ú©Ù„:</span>
                    <span class="result-value" id="finalPrice" style="color:#D4AF37; font-size:22px;">0 ØªÙˆÙ…Ø§Ù†</span>
                </div>
            </div>
            
            <div class="history">
                <div class="history-header">
                    <h3>ğŸ“œ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…Ø­Ø§Ø³Ø¨Ø§Øª (Ù‚ÛŒÙ…Øª ÙØ±ÙˆØ´)</h3>
                    <button class="clear-history" id="clearHistory1">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªØ§Ø±ÛŒØ®Ú†Ù‡</button>
                </div>
                <div id="historyList1"></div>
            </div>
        </div>
        
        <!-- ØªØ¨ Ø¯ÙˆÙ…: ØªØ¨Ø¯ÛŒÙ„ Ø¹ÛŒØ§Ø± Ø·Ù„Ø§ -->
        <div id="tab2" class="tab-content">
            <div class="privacy-info">
                <div class="privacy-icon">ğŸ”’</div>
                <div class="privacy-text">
                    ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ùˆ Ù†ØªØ§ÛŒØ¬ Ù…Ø­Ø§Ø³Ø¨Ø§Øª ÙÙ‚Ø· Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ù‡ÛŒÚ† Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§Ø±Ø³Ø§Ù„ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ Ø´Ù…Ø§ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø­ÙØ¸ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                </div>
            </div>
            
            <div class="input-group">
                <label for="goldPrice750">Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ÛŒ Û±Û¸ Ø¹ÛŒØ§Ø± (Ø¹ÛŒØ§Ø± Û·ÛµÛ°) (ØªÙˆÙ…Ø§Ù†)</label>
                <input type="text" id="goldPrice750" placeholder="Ù…Ø«Ø§Ù„: 3,000,000" data-type="price">
            </div>
            
            <button class="calculate-btn" id="calculateBtn2">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§</button>
            
            <div class="note">
                <strong>ÙØ±Ù…ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡:</strong><br>
                Ù‚ÛŒÙ…Øª Ø®Ø±ÛŒØ¯ Ø§Ø² Ù…Ø´ØªØ±ÛŒ (Ø¹ÛŒØ§Ø± Û·Û³Ûµ) = (Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ÛŒ Û·ÛµÛ° Ã· Û·ÛµÛ°) Ã— Û·Û³Ûµ<br>
                Ù‚ÛŒÙ…Øª Ø®Ø±ÛŒØ¯/ØªØ¹ÙˆÛŒØ¶ (Ø¹ÛŒØ§Ø± Û·Û´Û°) = (Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ÛŒ Û·ÛµÛ° Ã· Û·ÛµÛ°) Ã— Û·Û´Û°
            </div>
            
            <div id="results2" class="results">
                <h3>ğŸ“Š Ù†ØªØ§ÛŒØ¬ Ø®Ø±ÛŒØ¯/ØªØ¹ÙˆÛŒØ¶ Ø·Ù„Ø§</h3>
                <div class="result-item">
                    <span class="result-label">Ù‚ÛŒÙ…Øª Ø®Ø±ÛŒØ¯ Ø§Ø² Ù…Ø´ØªØ±ÛŒ (Ø¹ÛŒØ§Ø± Û·Û³Ûµ):</span>
                    <span class="result-value" id="price735">0 ØªÙˆÙ…Ø§Ù†</span>
                </div>
                <div class="result-item">
                    <span class="result-label">Ù‚ÛŒÙ…Øª Ø®Ø±ÛŒØ¯/ØªØ¹ÙˆÛŒØ¶ (Ø¹ÛŒØ§Ø± Û·Û´Û°):</span>
                    <span class="result-value" id="price740">0 ØªÙˆÙ…Ø§Ù†</span>
                </div>
            </div>
            
            <div class="history">
                <div class="history-header">
                    <h3>ğŸ“œ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…Ø­Ø§Ø³Ø¨Ø§Øª (Ø®Ø±ÛŒØ¯/ØªØ¹ÙˆÛŒØ¶)</h3>
                    <button class="clear-history" id="clearHistory2">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªØ§Ø±ÛŒØ®Ú†Ù‡</button>
                </div>
                <div id="historyList2"></div>
            </div>
        </div>
        
        <button id="installBtn" class="install-btn" title="Ù†ØµØ¨ Ø¨Ø±Ù†Ø§Ù…Ù‡">
            ğŸ“²
        </button>
        
        <footer>
            <p>Â© Û²Û°Û²Ûµ Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ø·Ù„Ø§ - ØªÙ…Ø§Ù…ÛŒ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¨Ù‡ ØªÙˆÙ…Ø§Ù† Ù…ÛŒâ€ŒØ¨Ø§Ø´Ù†Ø¯</p>
            <p class="footer-name">ØªÙˆØ³Ø· Ø¨Ù‡Ø§Ø¯Ø± Ù…Ø­Ù…Ø¯Ø²Ø§Ø¯Ù‡</p>
            <p>Ø§ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª Progressive Web App Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ùˆ Ù‚Ø§Ø¨Ù„ Ù†ØµØ¨ Ø¨Ø± Ø±ÙˆÛŒ Ú¯ÙˆØ´ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø§Ø³Øª</p>
            <p>ğŸ”’ ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙÙ‚Ø· Ø¯Ø± Ú¯ÙˆØ´ÛŒ Ø´Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ù‡ÛŒÚ† Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø§Ø±Ø³Ø§Ù„ Ù†Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯</p>
        </footer>
    </div>

    <script>
        // ØªØ¨â€ŒÙ‡Ø§
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const tabId = btn.getAttribute('data-tab');
                
                // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØªØ¨â€ŒÙ‡Ø§
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† ØªØ¨ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
                btn.classList.add('active');
                document.getElementById(tabId).classList.add('active');
                
                // Ø°Ø®ÛŒØ±Ù‡ ØªØ¨ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
                localStorage.setItem('selectedTab', tabId);
            });
        });
        
        // Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ ØªØ¨ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
        const savedTab = localStorage.getItem('selectedTab');
        if (savedTab) {
            const tabBtn = document.querySelector(`[data-tab="${savedTab}"]`);
            if (tabBtn) {
                tabBtn.click();
            }
        }
        
        // ÙØ±Ù…Øª Ú©Ø±Ø¯Ù† Ø§Ø¹Ø¯Ø§Ø¯ Ø¨Ø§ Ú©Ø§Ù…Ø§
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        
        // Ø­Ø°Ù Ú©Ø§Ù…Ø§ Ø§Ø² Ø§Ø¹Ø¯Ø§Ø¯ Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ø§Øª
        function parseFormattedNumber(str) {
            if (!str) return 0;
            return parseFloat(str.replace(/,/g, ''));
        }
        
        // ÙØ±Ù…Øª Ú©Ø±Ø¯Ù† Ø®ÙˆØ¯Ú©Ø§Ø± Ù‚ÛŒÙ…Øª Ù‡Ù†Ú¯Ø§Ù… ØªØ§ÛŒÙ¾
        const priceInputs = document.querySelectorAll('input[data-type="price"]');
        
        priceInputs.forEach(input => {
            input.addEventListener('input', function() {
                let value = this.value.replace(/,/g, '');
                
                // ÙÙ‚Ø· Ø§Ø¹Ø¯Ø§Ø¯ Ù…Ø¬Ø§Ø²
                if (!/^\d*$/.test(value)) {
                    value = value.replace(/[^\d]/g, '');
                }
                
                // ÙØ±Ù…Øª Ø¨Ø§ Ú©Ø§Ù…Ø§
                if (value.length > 0) {
                    this.value = formatNumber(value);
                } else {
                    this.value = '';
                }
            });
        });
        
        // ØªØ§Ø¨Ø¹ Ú¯Ø±ÙØªÙ† ØªØ§Ø±ÛŒØ® Ùˆ Ø²Ù…Ø§Ù† Ø´Ù…Ø³ÛŒ
        function getPersianDateTime() {
            const now = new Date();
            
            // ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ø³Ø§Ø¯Ù‡ Ø´Ø¯Ù‡ (Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´)
            const persianMonths = ['ÙØ±ÙˆØ±Ø¯ÛŒÙ†', 'Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª', 'Ø®Ø±Ø¯Ø§Ø¯', 'ØªÛŒØ±', 'Ù…Ø±Ø¯Ø§Ø¯', 'Ø´Ù‡Ø±ÛŒÙˆØ±', 'Ù…Ù‡Ø±', 'Ø¢Ø¨Ø§Ù†', 'Ø¢Ø°Ø±', 'Ø¯ÛŒ', 'Ø¨Ù‡Ù…Ù†', 'Ø§Ø³ÙÙ†Ø¯'];
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ (Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø³Ø§Ø¯Ù‡ Ø´Ø¯Ù‡)
            const gregorianYear = now.getFullYear();
            const gregorianMonth = now.getMonth() + 1;
            const gregorianDay = now.getDate();
            
            // ØªØ¨Ø¯ÛŒÙ„ Ø³Ø§Ø¯Ù‡ (Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¯Ù‚ÛŒÙ‚ Ù†ÛŒØ³ØªØŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
            let persianYear = gregorianYear - 621;
            let persianMonth, persianDay;
            
            if (gregorianMonth < 4 || (gregorianMonth === 4 && gregorianDay < 21)) {
                persianYear--;
                persianMonth = (gregorianMonth + 8) % 12 + 1;
                persianDay = gregorianDay + 20;
                if (persianDay > 31) {
                    persianDay -= 31;
                    persianMonth++;
                }
            } else {
                persianMonth = (gregorianMonth + 8) % 12 + 1;
                persianDay = gregorianDay - 20;
                if (persianDay < 1) {
                    persianDay += 31;
                    persianMonth--;
                }
            }
            
            // Ø²Ù…Ø§Ù†
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            
            return `${persianYear}/${persianMonth}/${persianDay} - ${hours}:${minutes}`;
        }
        
        // ØªØ¨ Ø§ÙˆÙ„: Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª ÙØ±ÙˆØ´ Ø·Ù„Ø§
        const calculateBtn1 = document.getElementById('calculateBtn1');
        const results1 = document.getElementById('results1');
        
        calculateBtn1.addEventListener('click', function() {
            // Ø¯Ø±ÛŒØ§ÙØª Ù…Ù‚Ø§Ø¯ÛŒØ± ÙˆØ±ÙˆØ¯ÛŒ
            const goldPrice = parseFormattedNumber(document.getElementById('goldPrice').value);
            const wagePercent = parseFloat(document.getElementById('wagePercent').value);
            const profitPercent = parseFloat(document.getElementById('profitPercent').value);
            const taxPercent = parseFloat(document.getElementById('taxPercent').value);
            const weight = parseFloat(document.getElementById('weight').value);
            
            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
            if (!goldPrice || goldPrice <= 0) {
                alert('Ù„Ø·ÙØ§ Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ÛŒ Ø®Ø§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            if (!weight || weight <= 0) {
                alert('Ù„Ø·ÙØ§ ÙˆØ²Ù† Ø·Ù„Ø§ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            // Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¨Ø± Ø§Ø³Ø§Ø³ ÙØ±Ù…ÙˆÙ„ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡
            // Ù…Ø±Ø­Ù„Ù‡ Û±: Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ø¨Ø§ Ø§Ø¬Ø±Øª
            const priceWithWage = goldPrice + (goldPrice * (wagePercent / 100));
            
            // Ù…Ø±Ø­Ù„Ù‡ Û²: Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ø¨Ø§ Ø§Ø¬Ø±Øª Ùˆ Ø³ÙˆØ¯
            const priceWithWageProfit = priceWithWage + (priceWithWage * (profitPercent / 100));
            
            // Ù…Ø±Ø­Ù„Ù‡ Û³: Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¨Ù„Øº Ø§Ø¬Ø±Øª Ùˆ Ø³ÙˆØ¯
            const wageProfitAmount = priceWithWageProfit - goldPrice;
            
            // Ù…Ø±Ø­Ù„Ù‡ Û´: Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¨Ù„Øº Ø¨Ø§ Ù…Ø§Ù„ÛŒØ§Øª
            const taxedAmount = wageProfitAmount + (wageProfitAmount * (taxPercent / 100));
            
            // Ù…Ø±Ø­Ù„Ù‡ Ûµ: Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Û± Ú¯Ø±Ù…
            const basePricePerGram = taxedAmount + goldPrice;
            
            // Ù…Ø±Ø­Ù„Ù‡ Û¶: Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ Ú©Ù„
            const finalPrice = basePricePerGram * weight;
            
            // Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
            document.getElementById('priceWithWage').textContent = formatNumber(Math.round(priceWithWage)) + ' ØªÙˆÙ…Ø§Ù†';
            document.getElementById('priceWithWageProfit').textContent = formatNumber(Math.round(priceWithWageProfit)) + ' ØªÙˆÙ…Ø§Ù†';
            document.getElementById('wageProfitAmount').textContent = formatNumber(Math.round(wageProfitAmount)) + ' ØªÙˆÙ…Ø§Ù†';
            document.getElementById('taxedAmount').textContent = formatNumber(Math.round(taxedAmount)) + ' ØªÙˆÙ…Ø§Ù†';
            document.getElementById('basePricePerGram').textContent = formatNumber(Math.round(basePricePerGram)) + ' ØªÙˆÙ…Ø§Ù†';
            document.getElementById('finalPrice').textContent = formatNumber(Math.round(finalPrice)) + ' ØªÙˆÙ…Ø§Ù†';
            
            // Ù†Ù…Ø§ÛŒØ´ Ø¨Ø®Ø´ Ù†ØªØ§ÛŒØ¬
            results1.style.display = 'block';
            
            // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± ØªØ§Ø±ÛŒØ®Ú†Ù‡
            saveToHistory1({
                goldPrice: goldPrice,
                wagePercent: wagePercent,
                profitPercent: profitPercent,
                taxPercent: taxPercent,
                weight: weight,
                finalPrice: Math.round(finalPrice),
                dateTime: getPersianDateTime()
            });
        });
        
        // ØªØ¨ Ø¯ÙˆÙ…: ØªØ¨Ø¯ÛŒÙ„ Ø¹ÛŒØ§Ø± Ø·Ù„Ø§
        const calculateBtn2 = document.getElementById('calculateBtn2');
        const results2 = document.getElementById('results2');
        
        calculateBtn2.addEventListener('click', function() {
            // Ø¯Ø±ÛŒØ§ÙØª Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ÛŒ 750 Ø¹ÛŒØ§Ø±
            const goldPrice750 = parseFormattedNumber(document.getElementById('goldPrice750').value);
            
            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
            if (!goldPrice750 || goldPrice750 <= 0) {
                alert('Ù„Ø·ÙØ§ Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ÛŒ Û±Û¸ Ø¹ÛŒØ§Ø± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            // Ù…Ø­Ø§Ø³Ø¨Ø§Øª
            const pricePerUnit = goldPrice750 / 750;
            const price735 = Math.round(pricePerUnit * 735);
            const price740 = Math.round(pricePerUnit * 740);
            
            // Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
            document.getElementById('price735').textContent = formatNumber(price735) + ' ØªÙˆÙ…Ø§Ù†';
            document.getElementById('price740').textContent = formatNumber(price740) + ' ØªÙˆÙ…Ø§Ù†';
            
            // Ù†Ù…Ø§ÛŒØ´ Ø¨Ø®Ø´ Ù†ØªØ§ÛŒØ¬
            results2.style.display = 'block';
            
            // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± ØªØ§Ø±ÛŒØ®Ú†Ù‡
            saveToHistory2({
                goldPrice750: goldPrice750,
                price735: price735,
                price740: price740,
                dateTime: getPersianDateTime()
            });
        });
        
        // Ù…Ø¯ÛŒØ±ÛŒØª ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØ¨ Ø§ÙˆÙ„
        function saveToHistory1(calculation) {
            let history = JSON.parse(localStorage.getItem('goldCalcHistory1') || '[]');
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ Ø§Ø¨ØªØ¯Ø§ÛŒ Ø¢Ø±Ø§ÛŒÙ‡
            history.unshift(calculation);
            
            // Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø¨Ù‡ Û±Û° Ù…ÙˆØ±Ø¯
            if (history.length > 10) {
                history = history.slice(0, 10);
            }
            
            localStorage.setItem('goldCalcHistory1', JSON.stringify(history));
            displayHistory1();
        }
        
        function displayHistory1() {
            const historyList = document.getElementById('historyList1');
            const history = JSON.parse(localStorage.getItem('goldCalcHistory1') || '[]');
            
            if (history.length === 0) {
                historyList.innerHTML = '<div class="history-item" style="text-align:center; color:#aaa;">ØªØ§Ø±ÛŒØ®Ú†Ù‡â€ŒØ§ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</div>';
                return;
            }
            
            historyList.innerHTML = '';
            history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div class="history-datetime">ğŸ“… ${item.dateTime}</div>
                    <div class="history-details">
                        <div>Ù‚ÛŒÙ…Øª Ø·Ù„Ø§: ${formatNumber(item.goldPrice)} ØªÙˆÙ…Ø§Ù†</div>
                        <div>ÙˆØ²Ù†: ${item.weight} Ú¯Ø±Ù…</div>
                        <div>Ø§Ø¬Ø±Øª: ${item.wagePercent}% - Ø³ÙˆØ¯: ${item.profitPercent}% - Ù…Ø§Ù„ÛŒØ§Øª: ${item.taxPercent}%</div>
                        <div style="color:#D4AF37; margin-top:5px;">ğŸ’° Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ: ${formatNumber(item.finalPrice)} ØªÙˆÙ…Ø§Ù†</div>
                    </div>
                `;
                historyList.appendChild(historyItem);
            });
        }
        
        // Ù…Ø¯ÛŒØ±ÛŒØª ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØ¨ Ø¯ÙˆÙ…
        function saveToHistory2(calculation) {
            let history = JSON.parse(localStorage.getItem('goldCalcHistory2') || '[]');
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ Ø§Ø¨ØªØ¯Ø§ÛŒ Ø¢Ø±Ø§ÛŒÙ‡
            history.unshift(calculation);
            
            // Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø¨Ù‡ Û±Û° Ù…ÙˆØ±Ø¯
            if (history.length > 10) {
                history = history.slice(0, 10);
            }
            
            localStorage.setItem('goldCalcHistory2', JSON.stringify(history));
            displayHistory2();
        }
        
        function displayHistory2() {
            const historyList = document.getElementById('historyList2');
            const history = JSON.parse(localStorage.getItem('goldCalcHistory2') || '[]');
            
            if (history.length === 0) {
                historyList.innerHTML = '<div class="history-item" style="text-align:center; color:#aaa;">ØªØ§Ø±ÛŒØ®Ú†Ù‡â€ŒØ§ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</div>';
                return;
            }
            
            historyList.innerHTML = '';
            history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div class="history-datetime">ğŸ“… ${item.dateTime}</div>
                    <div class="history-details">
                        <div>Ù‚ÛŒÙ…Øª Ø·Ù„Ø§ÛŒ Û·ÛµÛ°: ${formatNumber(item.goldPrice750)} ØªÙˆÙ…Ø§Ù†</div>
                        <div>Ù‚ÛŒÙ…Øª Ø®Ø±ÛŒØ¯ (Û·Û³Ûµ): ${formatNumber(item.price735)} ØªÙˆÙ…Ø§Ù†</div>
                        <div>Ù‚ÛŒÙ…Øª ØªØ¹ÙˆÛŒØ¶ (Û·Û´Û°): ${formatNumber(item.price740)} ØªÙˆÙ…Ø§Ù†</div>
                    </div>
                `;
                historyList.appendChild(historyItem);
            });
        }
        
        // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªØ§Ø±ÛŒØ®Ú†Ù‡â€ŒÙ‡Ø§
        document.getElementById('clearHistory1').addEventListener('click', function() {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØ¨ Ø§ÙˆÙ„ Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯ØŸ')) {
                localStorage.removeItem('goldCalcHistory1');
                displayHistory1();
            }
        });
        
        document.getElementById('clearHistory2').addEventListener('click', function() {
            if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØ¨ Ø¯ÙˆÙ… Ø±Ø§ Ù¾Ø§Ú© Ú©Ù†ÛŒØ¯ØŸ')) {
                localStorage.removeItem('goldCalcHistory2');
                displayHistory2();
            }
        });
        
        // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¨Ø§ Ú©Ù„ÛŒØ¯ Enter
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                const activeTab = document.querySelector('.tab-content.active');
                if (activeTab.id === 'tab1') {
                    calculateBtn1.click();
                } else if (activeTab.id === 'tab2') {
                    calculateBtn2.click();
                }
            }
        });
        
        // PWA: Ù‚Ø§Ø¨Ù„ÛŒØª Ù†ØµØ¨
        let deferredPrompt;
        const installBtn = document.getElementById('installBtn');
        const installNotice = document.querySelector('.install-notice');
        
        window.addEventListener('beforeinstallprompt', (e) => {
            // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ù†Ù…Ø§ÛŒØ´ Ø®ÙˆØ¯Ú©Ø§Ø± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù†ØµØ¨
            e.preventDefault();
            // Ø°Ø®ÛŒØ±Ù‡ event Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¨Ø¹Ø¯ÛŒ
            deferredPrompt = e;
            
            // Ù†Ù…Ø§ÛŒØ´ Ø¯Ú©Ù…Ù‡ Ù†ØµØ¨ Ùˆ Ø§Ø¹Ù„Ø§Ù† Ù†ØµØ¨
            installBtn.style.display = 'flex';
            
            // Ø§Ú¯Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ù†ØµØ¨ Ù†Ø´Ø¯Ù‡ØŒ Ø§Ø¹Ù„Ø§Ù† Ù†ØµØ¨ Ø±Ø§ Ù†Ø´Ø§Ù† Ø¨Ø¯Ù‡
            if (!window.matchMedia('(display-mode: standalone)').matches) {
                installNotice.style.display = 'block';
            }
        });
        
        installBtn.addEventListener('click', async () => {
            if (!deferredPrompt) return;
            
            // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù†ØµØ¨
            deferredPrompt.prompt();
            
            // Ù…Ù†ØªØ¸Ø± Ù…Ø§Ù†Ø¯Ù† Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±
            const { outcome } = await deferredPrompt.userChoice;
            
            if (outcome === 'accepted') {
                console.log('Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±Ø§ Ù†ØµØ¨ Ú©Ø±Ø¯');
                installBtn.style.display = 'none';
                installNotice.style.display = 'none';
            } else {
                console.log('Ú©Ø§Ø±Ø¨Ø± Ø§Ø² Ù†ØµØ¨ Ø¨Ø±Ù†Ø§Ù…Ù‡ ØµØ±Ù Ù†Ø¸Ø± Ú©Ø±Ø¯');
            }
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† deferredPrompt
            deferredPrompt = null;
        });
        
        // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ù†ØµØ¨ Ùˆ Ø§Ø¹Ù„Ø§Ù† Ù¾Ø³ Ø§Ø² Ù†ØµØ¨
        window.addEventListener('appinstalled', () => {
            installBtn.style.display = 'none';
            installNotice.style.display = 'none';
            deferredPrompt = null;
        });
        
        // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª PWA
        if (window.matchMedia('(display-mode: standalone)').matches) {
            installBtn.style.display = 'none';
            installNotice.style.display = 'none';
        }
        
        // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… ØªØ£Ú©ÛŒØ¯ Ø¨Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­Ù„ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
        window.addEventListener('load', function() {
            console.log('ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ÛŒÙ† Ø¨Ø±Ù†Ø§Ù…Ù‡ ÙÙ‚Ø· Ø¯Ø± Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.');
            console.log('Ù‡ÛŒÚ† Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø§Ø±Ø³Ø§Ù„ Ù†Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯.');
            console.log('ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ø± localStorage Ù…Ø±ÙˆØ±Ú¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.');
        });
        
        // Ø§ÛŒØ¬Ø§Ø¯ service worker Ø¨Ø±Ø§ÛŒ PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').catch(err => {
                    console.log('ServiceWorker Ø«Ø¨Øª Ù†Ø´Ø¯: ', err);
                });
            });
        }
        
        // Ù†Ù…Ø§ÛŒØ´ ØªØ§Ø±ÛŒØ®Ú†Ù‡â€ŒÙ‡Ø§ Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡
        displayHistory1();
        displayHistory2();
        
        // Ù¾Ø± Ú©Ø±Ø¯Ù† ÙÛŒÙ„Ø¯Ù‡Ø§ Ø¨Ø§ Ù…Ø«Ø§Ù„ Ø¨Ø±Ø§ÛŒ Ø¢Ø²Ù…Ø§ÛŒØ´
        window.addEventListener('load', function() {
            // ÙÙ‚Ø· Ø§Ú¯Ø± ØªØ§Ø±ÛŒØ®Ú†Ù‡â€ŒØ§ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯ØŒ Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†
            const history1 = JSON.parse(localStorage.getItem('goldCalcHistory1') || '[]');
            if (history1.length === 0) {
                document.getElementById('goldPrice').value = '12,300,000';
                document.getElementById('weight').value = '5.090';
            }
            
            const history2 = JSON.parse(localStorage.getItem('goldCalcHistory2') || '[]');
            if (history2.length === 0) {
                document.getElementById('goldPrice750').value = '3,000,000';
            }
        });
    </script>
    
    <!-- Service Worker Ø¨Ø±Ø§ÛŒ PWA -->
    <script>
        // Ø§ÛŒØ¬Ø§Ø¯ ÙØ§ÛŒÙ„ Service Worker Ù…Ø¬Ø§Ø²ÛŒ
        const swContent = `
        self.addEventListener('install', function(event) {
            event.waitUntil(
                caches.open('gold-calc-v2').then(function(cache) {
                    return cache.addAll([
                        '/',
                        '/index.html'
                    ]);
                })
            );
        });

        self.addEventListener('fetch', function(event) {
            event.respondWith(
                caches.match(event.request).then(function(response) {
                    return response || fetch(event.request);
                })
            );
        });
        `;
        
        // Ø§ÛŒØ¬Ø§Ø¯ Blob Ø§Ø² Ú©Ø¯ Service Worker
        const blob = new Blob([swContent], { type: 'application/javascript' });
        const swURL = URL.createObjectURL(blob);
        
        // Ø«Ø¨Øª Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register(swURL)
                .then(registration => {
                    console.log('Service Worker Ø«Ø¨Øª Ø´Ø¯ Ø¨Ø§ Ù…Ø­Ø¯ÙˆØ¯Ù‡:', registration.scope);
                })
                .catch(error => {
                    console.log('Ø«Ø¨Øª Service Worker Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯:', error);
                });
        }
    </script>
    
    <!-- Manifest Ø¨Ø±Ø§ÛŒ PWA -->
    <script>
        // Ø§ÛŒØ¬Ø§Ø¯ manifest Ù¾ÙˆÛŒØ§
        const manifest = {
            "name": "Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ø·Ù„Ø§",
            "short_name": "Ø·Ù„Ø§Ø³Ù†Ø¬",
            "description": "Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª ÙØ±ÙˆØ´ Ø·Ù„Ø§ Ø¨Ø§ Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ† Ø§Ø¬Ø±ØªØŒ Ø³ÙˆØ¯ØŒ Ù…Ø§Ù„ÛŒØ§Øª Ùˆ ÙˆØ²Ù† - Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙÙ‚Ø· Ø¯Ø± Ú¯ÙˆØ´ÛŒ Ø´Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯",
            "start_url": "/",
            "display": "standalone",
            "background_color": "#121212",
            "theme_color": "#D4AF37",
            "icons": [
                {
                    "src": "data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 fill=%22%23D4AF37%22>ğŸ’°</text></svg>",
                    "sizes": "any",
                    "type": "image/svg+xml"
                }
            ]
        };
        
        // Ø§ÛŒØ¬Ø§Ø¯ ØªÚ¯ manifest
        const manifestEl = document.createElement('link');
        manifestEl.rel = 'manifest';
        manifestEl.href = URL.createObjectURL(new Blob([JSON.stringify(manifest)], { type: 'application/json' }));
        document.head.appendChild(manifestEl);
    </script>
</body>
</html>
